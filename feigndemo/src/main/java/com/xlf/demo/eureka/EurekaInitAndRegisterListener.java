package com.xlf.demo.eureka;import com.netflix.appinfo.*;import com.netflix.config.ConfigurationManager;import com.netflix.discovery.*;import javax.servlet.ServletContextEvent;import javax.servlet.ServletContextListener;import javax.servlet.annotation.WebListener;/** * @program: feigndemo * @description: * @author: xfl * @create: 2019-03-05 11:30 **/@WebListenerpublic class EurekaInitAndRegisterListener implements ServletContextListener {    @Override    public void contextInitialized(ServletContextEvent sce) {        ConfigurationManager.getConfigInstance()                .setProperty("eureka.region", "default");        ConfigurationManager.getConfigInstance()                .setProperty("eureka.serviceUrl.default", "http://10.1.1.103:9999/eureka/");        EurekaClientConfig eurekaClientConfig = new DefaultEurekaClientConfig();        EurekaInstanceConfig eurekaInstanceConfig = new MyDataCenterInstanceConfig("springmvc");        InstanceInfo instanceInfo = InstanceInfo.Builder.newBuilder()                .setAppName("springmvc").setVIPAddress("springmvc").setIPAddr("172.0.0.1")                .setLeaseInfo(LeaseInfo.Builder.newBuilder().setDurationInSecs(10).build())                .setHostName("localhost").setDataCenterInfo(new MyDataCenterInfo(DataCenterInfo.Name.MyOwn)).build();        ApplicationInfoManager applicationInfoManager = new ApplicationInfoManager(eurekaInstanceConfig, instanceInfo);        EurekaClient eurekaClient = new DiscoveryClient(applicationInfoManager, eurekaClientConfig);        eurekaClient.registerHealthCheck(new HealthCheckHandler() {            @Override            public InstanceInfo.InstanceStatus getStatus(InstanceInfo.InstanceStatus instanceStatus) {                return InstanceInfo.InstanceStatus.UP;            }        });    }    @Override    public void contextDestroyed(ServletContextEvent sce) {}}